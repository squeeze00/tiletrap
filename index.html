<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minesweeper with Difficulty Options</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background-color: #111;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  .controls {
    margin-bottom: 10px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    z-index: 2;
    position: relative;
  }
  button, select {
    background: #333;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover, select:hover {
    background: #555;
  }
  .grid-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 100%;
    max-height: 80vh;
  }
  .grid {
    display: grid;
    gap: 2px;
    background: #222;
    padding: 10px;
    border-radius: 10px;
    transform-origin: top center;
    transition: transform 0.15s ease;
  }
  .cell {
    background: #2a2a2a;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    border-radius: 4px;
    outline: none;
    transition: outline-color 0.15s ease, outline-width 0.15s ease;
  }
  .cell:hover {
    outline: 2px solid rgba(255, 255, 255, 0.2);
    outline-offset: -2px;
  }
  .revealed {
    background: #ddd;
    color: #111;
    cursor: default;
  }
  .mine {
    background: red;
    color: white;
  }
  .flag {
    color: gold;
  }
</style>
</head>
<body>
<div class="controls">
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium (40 mines)</option>
    <option value="hard">Hard (100 mines)</option>
  </select>
  <button id="zoomIn">âž• Zoom In</button>
  <button id="zoomOut">âž– Zoom Out</button>
  <button id="reset">Reset</button>
</div>
<div class="grid-wrapper">
  <div id="grid" class="grid"></div>
</div>
<script>
let rows = 9, cols = 9, mines = 10, cellSize = 49;
let grid = [], zoom = 1;
const gridEl = document.getElementById('grid');

function setDifficulty(level) {
  if (level === 'easy') {
    rows = 9; cols = 9; mines = 10; cellSize = 49;
  } else if (level === 'medium') {
    rows = 16; cols = 16; mines = 40; cellSize = Math.floor(window.innerHeight * 0.6 / rows);
  } else if (level === 'hard') {
    rows = 24; cols = 24; mines = 100; cellSize = Math.floor(window.innerHeight * 0.6 / rows);
  }
}

function init() {
  grid = [];
  gridEl.style.gridTemplateColumns = `repeat(${cols}, ${cellSize}px)`;
  for (let r = 0; r < rows; r++) {
    let row = [];
    for (let c = 0; c < cols; c++) {
      row.push({ mine: false, revealed: false, flagged: false, adj: 0 });
    }
    grid.push(row);
  }
  placeMines();
  render();
}

function placeMines() {
  let placed = 0;
  while (placed < mines) {
    let r = Math.floor(Math.random() * rows);
    let c = Math.floor(Math.random() * cols);
    if (!grid[r][c].mine) {
      grid[r][c].mine = true;
      placed++;
    }
  }
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (grid[r][c].mine) continue;
      let count = 0;
      for (let dr = -1; dr <= 1; dr++) {
        for (let dc = -1; dc <= 1; dc++) {
          let nr = r + dr, nc = c + dc;
          if (nr >= 0 && nr < rows && nc >= 0 && nc < cols && grid[nr][nc].mine) count++;
        }
      }
      grid[r][c].adj = count;
    }
  }
}

function reveal(r, c) {
  if (grid[r][c].revealed || grid[r][c].flagged) return;
  grid[r][c].revealed = true;
  if (grid[r][c].adj === 0 && !grid[r][c].mine) {
    for (let dr = -1; dr <= 1; dr++) {
      for (let dc = -1; dc <= 1; dc++) {
        let nr = r + dr, nc = c + dc;
        if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) reveal(nr, nc);
      }
    }
  }
}

function render() {
  gridEl.innerHTML = '';
  gridEl.style.transform = `scale(${zoom})`;
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.style.width = cellSize + 'px';
      cell.style.height = cellSize + 'px';
      if (grid[r][c].revealed) {
        cell.classList.add('revealed');
        if (grid[r][c].mine) cell.classList.add('mine'), cell.textContent = 'ðŸ’£';
        else if (grid[r][c].adj > 0) cell.textContent = grid[r][c].adj;
      } else if (grid[r][c].flagged) {
        cell.textContent = 'ðŸš©';
        cell.classList.add('flag');
      }
      cell.addEventListener('click', () => {
        if (grid[r][c].mine) {
          alert('Game Over');
          revealAll();
        } else reveal(r, c);
        render();
      });
      cell.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        grid[r][c].flagged = !grid[r][c].flagged;
        render();
      });
      gridEl.appendChild(cell);
    }
  }
}

function revealAll() {
  for (let r = 0; r < rows; r++)
    for (let c = 0; c < cols; c++)
      grid[r][c].revealed = true;
}

document.getElementById('zoomIn').onclick = () => { zoom = Math.min(zoom + 0.1, 2); render(); };
document.getElementById('zoomOut').onclick = () => { zoom = Math.max(zoom - 0.1, 0.5); render(); };
document.getElementById('reset').onclick = () => { init(); };
document.getElementById('difficulty').onchange = (e) => {
  setDifficulty(e.target.value);
  init();
};

init();
</script>
</body>
</html>
