<!-- Minesweeper with safe first click like Google Minesweeper and modern MVP theme + classic Minesweeper number colors -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minesweeper MVP</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: radial-gradient(circle at top, #1e1e2f, #0e0e14);
    color: #f0f0f0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    min-height: 100vh;
  }
  .controls {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    z-index: 2;
    position: relative;
    padding: 10px 15px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }
  button, select {
    background: rgba(255, 255, 255, 0.08);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.1);
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s ease;
  }
  select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,<svg fill='white' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    padding-right: 30px;
  }
  button:hover, select:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-1px);
  }
  .grid-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 100%;
    max-height: 80vh;
    background: rgba(255, 255, 255, 0.03);
    padding: 15px;
    border-radius: 15px;
    box-shadow: inset 0 0 25px rgba(0,0,0,0.4), 0 8px 30px rgba(0,0,0,0.4);
  }
  .grid {
    display: grid;
    gap: 3px;
    background: rgba(255, 255, 255, 0.05);
    padding: 10px;
    border-radius: 12px;
    transform-origin: top center;
    transition: transform 0.15s ease;
  }
  .cell {
    background: linear-gradient(145deg, #2b2b3b, #1c1c28);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    border-radius: 6px;
    outline: none;
    transition: all 0.15s ease;
    box-shadow: inset 0 2px 4px rgba(255,255,255,0.05), 0 2px 6px rgba(0,0,0,0.5);
  }
  .cell:hover {
    outline: 2px solid rgba(255, 255, 255, 0.2);
    outline-offset: -2px;
    transform: translateY(-1px);
  }
  .revealed {
    background: rgba(255, 255, 255, 0.8);
    color: #111;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
    cursor: default;
  }
  .mine { background: #d62828; color: white; }
  .flag { color: gold; }
  .n1 { color: #0000ff; }
  .n2 { color: #008200; }
  .n3 { color: #ff0000; }
  .n4 { color: #000084; }
  .n5 { color: #840000; }
  .n6 { color: #008284; }
  .n7 { color: #840084; }
  .n8 { color: #757575; }
  .win-animation { animation: winPulse 1s ease-in-out infinite alternate; }
  @keyframes winPulse {
    0% { transform: scale(1); box-shadow: 0 0 10px #0f0; }
    100% { transform: scale(1.05); box-shadow: 0 0 25px #0f0; }
  }
</style>
</head>
<body>
<div class="controls">
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium (40 mines)</option>
    <option value="hard">Hard (100 mines)</option>
  </select>
  <button id="zoomIn">âž• Zoom In</button>
  <button id="zoomOut">âž– Zoom Out</button>
  <button id="reset">Reset</button>
</div>
<div class="grid-wrapper">
  <div id="grid" class="grid"></div>
</div>
<script>
let rows, cols, mines, cellSize, grid, zoom = 1, firstClick = true;
const gridEl = document.getElementById('grid');

function setDifficulty(level) {
  if (level === 'easy') { rows = 9; cols = 9; mines = 10; cellSize = 49; }
  else if (level === 'medium') { rows = 16; cols = 16; mines = 40; cellSize = Math.floor(window.innerHeight * 0.6 / rows); }
  else if (level === 'hard') { rows = 24; cols = 24; mines = 100; cellSize = Math.floor(window.innerHeight * 0.6 / rows); }
}

function init() {
  setDifficulty(document.getElementById('difficulty').value);
  grid = [];
  firstClick = true;
  gridEl.classList.remove('win-animation');
  gridEl.style.gridTemplateColumns = `repeat(${cols}, ${cellSize}px)`;
  for (let r = 0; r < rows; r++) {
    let row = [];
    for (let c = 0; c < cols; c++) {
      row.push({ mine: false, revealed: false, flagged: false, adj: 0 });
    }
    grid.push(row);
  }
  render();
}

function placeMinesSafe(firstR, firstC) {
  let safeZone = [];
  for (let dr = -1; dr <= 1; dr++) {
    for (let dc = -1; dc <= 1; dc++) {
      let nr = firstR + dr, nc = firstC + dc;
      if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) safeZone.push(`${nr},${nc}`);
    }
  }
  let placed = 0;
  while (placed < mines) {
    let r = Math.floor(Math.random() * rows);
    let c = Math.floor(Math.random() * cols);
    if (!grid[r][c].mine && !safeZone.includes(`${r},${c}`)) {
      grid[r][c].mine = true;
      placed++;
    }
  }
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (grid[r][c].mine) continue;
      let count = 0;
      for (let dr = -1; dr <= 1; dr++) {
        for (let dc = -1; dc <= 1; dc++) {
          let nr = r + dr, nc = c + dc;
          if (nr >= 0 && nr < rows && nc >= 0 && nc < cols && grid[nr][nc].mine) count++;
        }
      }
      grid[r][c].adj = count;
    }
  }
}

function reveal(r, c) {
  if (grid[r][c].revealed || grid[r][c].flagged) return;
  grid[r][c].revealed = true;
  if (grid[r][c].adj === 0 && !grid[r][c].mine) {
    for (let dr = -1; dr <= 1; dr++) {
      for (let dc = -1; dc <= 1; dc++) {
        let nr = r + dr, nc = c + dc;
        if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) reveal(nr, nc);
      }
    }
  }
}

function checkWin() {
  let revealedCount = 0;
  let totalCells = rows * cols;
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (grid[r][c].revealed) revealedCount++;
    }
  }
  if (revealedCount === totalCells - mines) {
    triggerWinAnimation();
  }
}

function triggerWinAnimation() {
  gridEl.classList.add('win-animation');
  setTimeout(() => { init(); }, 3500);
}

function render() {
  gridEl.innerHTML = '';
  gridEl.style.transform = `scale(${zoom})`;
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.style.width = cellSize + 'px';
      cell.style.height = cellSize + 'px';
      if (grid[r][c].revealed) {
        cell.classList.add('revealed');
        if (grid[r][c].mine) cell.classList.add('mine'), cell.textContent = 'ðŸ’£';
        else if (grid[r][c].adj > 0) {
          cell.textContent = grid[r][c].adj;
          cell.classList.add(`n${grid[r][c].adj}`);
        }
      } else if (grid[r][c].flagged) {
        cell.textContent = 'ðŸš©';
        cell.classList.add('flag');
      }
      cell.addEventListener('click', () => {
        if (firstClick) {
          placeMinesSafe(r, c);
          reveal(r, c);
          firstClick = false;
        } else if (grid[r][c].mine) {
          revealAll();
        } else {
          reveal(r, c);
          checkWin();
        }
        render();
      });
      cell.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        grid[r][c].flagged = !grid[r][c].flagged;
        render();
      });
      gridEl.appendChild(cell);
    }
  }
}

function revealAll() {
  for (let r = 0; r < rows; r++)
    for (let c = 0; c < cols; c++)
      grid[r][c].revealed = true;
}

document.getElementById('zoomIn').onclick = () => { zoom = Math.min(zoom + 0.1, 2); render(); };
document.getElementById('zoomOut').onclick = () => { zoom = Math.max(zoom - 0.1, 0.5); render(); };
document.getElementById('reset').onclick = () => { init(); };
document.getElementById('difficulty').onchange = () => { init(); };

init();
</script>
</body>
</html>
